{% component "baseModal" id="editor-modal" animation='none' %}
      {% fill "title" %}
      <div class="flex items-center justify-between gap-8">
        <h3 
        x-init="getEditorModal().df.set('title', $el)" 
        class="text-lg font-semibold text-gray-900 dark:text-gray-300">
         Title
        </h3>
        <!-- node options -->
        <div class="flex items-center gap-2">
           <div 
            title="Add a child node"
            @click="getEditorModal().openAddChildForm()"
            class="p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded cursor-pointer">
             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus-icon lucide-plus"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
           </div>
           <div 
            title="Delete this node"
            @click="getEditorModal().openConfirmDelete()"
            class="p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-icon lucide-trash"><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/><path d="M3 6h18"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
           </div>
           <div 
            title="Edit this node"
            @click="getEditorModal().editNode()"
            class="p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pencil-icon lucide-pencil"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"/><path d="m15 5 4 4"/></svg>
           </div>
        </div>
      </div>
      {% endfill %}
      {% fill "body" %}
        <div class="p-4" id="editor-container">
          {% component "editor" / %}
        </div>

        <!-- add node form -->
        {% component "focusedElement" id="fe-add-node" %}
        <form 
        class="p-4 bg-white" 
        @keydown.enter="$event.preventDefault();" 
        id="add-node-form">   
        <div class="relative">
          <input type="text" @keyup.enter="getEditorModal().addChildNode()" 
          x-effect="isOpen ? $nextTick(() => $el.focus()) : null"
          name="node_name"
          placeholder="Enter node name"
          required
          class="block w-full rounded-md border px-3 py-4 text-sm bg-white text-gray-900 placeholder-gray-500"
          />
        </div>
        <button 
        type="button" 
        @click="getEditorModal().addChildNode()" 
        class="inline-flex items-center justify-center w-full rounded-md text-sm px-3 py-4 bg-slate-900 text-white hover:bg-slate-800 focus:outline-none font-medium mt-4">
        Add Node
      </button>
    </form>
    {% endcomponent %}
    
    <!-- set link form  -->
    {% component "focusedElement" id="fe-set-link" %}
      {% fill "title" %}Set Link{% endfill %}
      {% fill "default" %}
      <form 
      class="p-4 bg-white" 
          @keydown.enter="$event.preventDefault();" 
          id="set-link-form">   
                <div class="relative">
                      <input
                      x-ref="urlInput"
                      type="text" @keyup.enter="getEditorModal().setLink($el.value)" 
                      x-effect="isOpen ? $nextTick(() => $el.focus()) : null"
                      name="url"
                      placeholder="Enter URL"
                      required
                      class="block w-full rounded-md border px-3 py-4 text-sm bg-white text-gray-900 placeholder-gray-500"
                      />
                  </div>
                  <button 
                  type="button" 
                  @click="getEditorModal().setLink($refs.urlInput.value)" 
                  class="inline-flex items-center justify-center w-full rounded-md text-sm px-3 py-4 bg-slate-900 text-white hover:bg-slate-800 focus:ring-2 focus:ring-slate-500 focus:outline-none font-medium mt-4">
                  Set Link
                </button>
              </form>
          {% endfill %}
        {% endcomponent %}

        <!-- confirm delete overlay -->
        {% component "focusedElement" id="fe-confirm-delete" %}
          {% fill "title" %}Delete Node{% endfill %}
          {% fill "default" %}
            <div class="p-4 bg-white">
              <p class="text-sm text-gray-700">Are you sure you want to delete this node? This action cannot be undone.</p>
              <div class="pt-4 flex items-center gap-2">
                <button type="button" @click="getEditorModal().cancelConfirmDelete()" class="inline-flex items-center justify-center flex-1 rounded-md text-sm px-3 py-4 border border-gray-300 text-gray-900 hover:bg-gray-100 focus:outline-none">Cancel</button>
                <button type="button" @click="getEditorModal().confirmDelete()" class="inline-flex items-center justify-center flex-1 rounded-md text-sm px-3 py-4 bg-rose-600 text-white hover:bg-rose-500 focus:outline-none">Delete</button>
              </div>
            </div>
          {% endfill %}
        {% endcomponent %}


      {% endfill %}
{% endcomponent %}
